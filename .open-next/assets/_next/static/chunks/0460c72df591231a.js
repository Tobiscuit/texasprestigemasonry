(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,67035,e=>{"use strict";var t=e.i(43476),i=e.i(71645),s=e.i(78938);let n="native_signin_prompt_v1";function a(){let[e,a]=(0,i.useState)(!1),[l,r]=(0,i.useState)(!1),[o,d]=(0,i.useState)(""),c=void 0!==window.PublicKeyCredential,u=(0,i.useMemo)(()=>(function(){if("u"<typeof navigator)return"your device security";let e=navigator.userAgent.toLowerCase();return e.includes("iphone")||e.includes("ipad")||e.includes("ipod")||e.includes("mac")?"Face ID / Touch ID":e.includes("windows")?"Windows Hello":e.includes("android")?"your fingerprint or screen lock":"your device security"})(),[]);(0,i.useEffect)(()=>{(async()=>{if(c)try{let e=localStorage.getItem(n);if("dismissed"===e||"enabled"===e)return;let t=await fetch("/api/auth/passkey/list-user-passkeys",{method:"GET",credentials:"include"});if(!t.ok)return;let i=await t.json();if(Array.isArray(i)&&i.length>0)return void localStorage.setItem(n,"enabled");a(!0)}catch{}})()},[c]);let m=async()=>{r(!0),d("");try{let e=await s.authClient.passkey.addPasskey({name:"This device",authenticatorAttachment:"platform"});e.data?(localStorage.setItem(n,"enabled"),a(!1)):d(e.error?.message||"Could not enable quick sign-in.")}catch{d("Could not enable quick sign-in.")}finally{r(!1)}};return e?(0,t.jsx)("div",{className:"fixed inset-0 z-[120] bg-black/45 backdrop-blur-sm flex items-end md:items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl border border-gray-100 p-6",children:[(0,t.jsx)("h3",{className:"text-xl font-black text-midnight-slate mb-2",children:"Turn on quicker sign-in?"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mb-5",children:["Use ",u," next time so signing in is instant on this device."]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{localStorage.setItem(n,"dismissed"),a(!1)},className:"flex-1 py-3 rounded-xl border border-gray-200 text-gray-700 font-bold hover:bg-gray-50 transition-colors",children:"Not now"}),(0,t.jsx)("button",{type:"button",onClick:m,disabled:l,className:"flex-1 py-3 rounded-xl bg-midnight-slate text-white font-bold hover:bg-midnight-slate transition-colors disabled:opacity-60",children:l?"Please wait...":"Continue"})]}),o&&(0,t.jsx)("p",{className:"text-sm text-red-600 mt-3",children:o})]})}):null}e.s(["default",()=>a])}]);